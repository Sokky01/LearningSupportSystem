<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.util.List" %>
<%@ page import="model.LearningstarttransitionBeans" %>

<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å­¦ç¿’é–‹å§‹ç”»é¢</title>

<!-- çµ±ä¸€CSS -->
<link rel="stylesheet" href="css/unified-theme.css">

<style>
/* ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.subject-select-area {
    background: #f8f9fa;
    padding: 32px;
    border-radius: 12px;
    margin: 24px 0;
}

.subject-select-area label {
    font-size: 18px;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 12px;
}

.subject-select-area select {
    font-size: 16px;
    padding: 12px 16px;
    margin-bottom: 24px;
}

.hint-box {
    background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
    padding: 20px;
    border-radius: 8px;
    border-left: 4px solid #27ae60;
    margin: 24px 0;
}

.hint-box p {
    color: #2c3e50;
    line-height: 1.8;
    margin: 0;
}

.button-group {
    display: flex;
    gap: 16px;
    justify-content: center;
    margin-top: 24px;
}

.start-icon {
    font-size: 80px;
    text-align: center;
    margin: 20px 0;
}
</style>
</head>

<body>

<!-- å…±é€šãƒ˜ãƒƒãƒ€ãƒ¼ã‚’èª­ã¿è¾¼ã¿ï¼ˆå‡¦ç†ã¯å¤‰æ›´ãªã—ï¼‰ -->
<jsp:include page="common/header.jsp" />

<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<header>
    <div>å­¦ç¿’é–‹å§‹ç”»é¢</div>
</header>

<!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
<main class="main-content">
    <div class="content-wrapper">
        <!-- ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ -->
        <nav class="breadcrumb">
            ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ >> å­¦ç¿’é–‹å§‹
        </nav>

        <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚«ãƒ¼ãƒ‰ -->
        <div class="page-content">
            
            <h1>ğŸ“š å­¦ç¿’ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†</h1>
            
            <div class="start-icon">ğŸ“</div>

            <!-- ç§‘ç›®é¸æŠã‚¨ãƒªã‚¢ -->
            <div class="subject-select-area">
                <label for="subject">å­¦ç¿’ã™ã‚‹æ•™ç§‘ã‚’é¸æŠï¼š</label>
                <select id="subject" name="subject" class="form-control">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <%
                    // ===== å‡¦ç†éƒ¨åˆ†ï¼ˆå¤‰æ›´ãªã—ï¼‰ =====
                    List<LearningstarttransitionBeans> subjectList =
                        (List<LearningstarttransitionBeans>) request.getAttribute("subjectList");
                    if (subjectList != null) {
                        for (LearningstarttransitionBeans subject : subjectList) {
                    %>
                        <option value="<%= subject.getSubjectid() %>">
                            <%= subject.getSubjectname() %>
                        </option>
                    <%
                        }
                    }
                    %>
                </select>

                <!-- ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå‡¦ç†éƒ¨åˆ†ã¯å¤‰æ›´ãªã—ï¼‰ -->
                <form action="CountUpServlet" method="get" onsubmit="return checkBeforeStart();">
                    <input type="hidden" name="subjectId" id="selectedSubjectId">
                    <button type="submit" id="startBtn" class="btn btn-primary btn-lg btn-block">
                        â–¶ï¸ å­¦ç¿’é–‹å§‹
                    </button>
                </form>
            </div>

            <!-- ãƒ’ãƒ³ãƒˆè¡¨ç¤º -->
            <div class="hint-box">
                <p>
                    ğŸ’¡ <strong>ä½¿ã„æ–¹ã®ãƒ’ãƒ³ãƒˆ</strong><br>
                    ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨é¸æŠã—ãŸæ•™ç§‘ã®å­¦ç¿’ç”»é¢ã«ç§»å‹•ã—ã¾ã™ã€‚<br>
                    å­¦ç¿’ãŒå®Œäº†ã™ã‚‹ã¨è‡ªå‹•ã§è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚
                </p>
            </div>

            <!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
            <div class="button-group">
                <button type="button" class="btn btn-outline" onclick="location.href='UserMainmenuServlet'">
                    â† æˆ»ã‚‹
                </button>
            </div>

        </div>
    </div>
</main>

<!-- JavaScriptï¼ˆå‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã¯ä¸€åˆ‡å¤‰æ›´ãªã—ï¼‰ -->
<script>
// é¸æŠã•ã‚ŒãŸæ•™ç§‘IDã‚’hiddenã«ã‚»ãƒƒãƒˆ
document.getElementById('subject').addEventListener('change', function() {
    document.getElementById('selectedSubjectId').value = this.value;
});

function checkBeforeStart() {
    // â–¼ ä¾‹ï¼šsubjectId ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã®ãƒã‚§ãƒƒã‚¯
    const subjectId = document.getElementById("selectedSubjectId").value;

    if (!subjectId) {
        alert("ç§‘ç›®ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚é¸æŠã—ã¦ãã ã•ã„ã€‚");
        return false;  // é€ä¿¡ã—ãªã„
    }

    // â–¼ ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’å‡ºã—ãŸã„å ´åˆï¼ˆä»»æ„ï¼‰
    return confirm("å­¦ç¿’ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ");

    // true ãŒè¿”ã‚‹ â†’ ãã®ã¾ã¾é€ä¿¡
    // false â†’ é€ä¿¡ã‚­ãƒ£ãƒ³ã‚»ãƒ«
}
</script>

</body>
</html>
